<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    <title>Hamwerk</title>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet">
</head>

<body>
    <div class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            {{> navbar}}
        </div>
    </div>

    {{> contents}}

    {{> about_modal}}
</body>

<template name="contents">
    {{#if showEverything}}
        <div class="container-fluid">
            <div class="row">
                <div id="side-pane" class="col-sm-3">
                    <div class="list-group">
                        {{> classes}}
                    </div>
                </div>

                <div id="main-pane" class="col-sm-9">
                    {{> assignments}}
                </div>
            </div>
        </div>
    {{else}}
        {{> landing_page}}
    {{/if}}
</template>

<template name="navbar">
    <div class="navbar-header">
        <span class="navbar-brand">Hamwerk <a href="#" data-toggle="modal" data-target="#about"><i class="fa fa-info-circle"></i></a></span>
        <!-- yes, the "About" link *should* be in a navbar-nav, but that was folding on narrow viewports, which I'm too lazy to fix -->
    </div>
    <div class="pull-right navbar-text">{{> loginButtons align="right"}}</div>
</template>

<template name="classes">
    {{#each fake_all_class_list}}
        <a class="class list-group-item {{active}}" href="/">All Classes</a>
    {{/each}}
    {{#each classes}}
        {{#if editing}}
            <div class="edit list-group-item">
                <input class="class-name-input form-control" id="class-name-input" type="text" value="{{name}}" />
            </div>
        {{else}}
            <a class="class list-group-item {{active}}" href="/{{_id}}">
                {{name}}
            </a>
        {{/if}}
    {{/each}}
    <div id="createList" class="nav-header list-group-item">
        <span>
            <input type="text" id="new-class" placeholder="New class" class="form-control" {{create_disabled}}/>
        </span>
    </div>
</template>

<template name="assignments">
    <div id="items-view" class="container-fluid">
        <div class="list-group">
            {{> new_assignment_box}}
            {{#each assignments}}
                {{> assignment_item}}
            {{/each}}
        </div>
    </div>
</template>

<template name="new_assignment_box">
    <div class="list-group-item row">
        <span class="form-group">
            <input type="text" id="new-assignment" placeholder="e.g. {{sample}}" class="form-control" {{disabled}}/>
        </span>
    </div>
</template>

<template name="assignment_item">
    <div class="assignment {{done_class}} list-group-item row {{color_class}}">
        {{#if editing}}
            <div class="col-sm-9 edit">
                <input class="form-control input-sm" id="assignment-input" type="text" value="{{text}}" />
            </div>
            <div class="item-details col-sm-3 text-right">
                <div class="input-group">
                    <span class="input-group-addon">Due</span>
                    <input id="due-date-input" type="text" value="{{editable_due_date}}" class="form-control input-sm" />
                </div>
            </div>
        {{else}}
            <div class="col-sm-9">
                <i class="fa fa-{{done_checkbox}}square-o fa-fw fa-lg check pull-left visible-xs"></i>
                <i class="fa fa-{{done_checkbox}}square-o fa-fw check hidden-xs"></i>
                <span class="assignment-text">{{text}}</span>
            </div>
            <div class="item-details col-sm-3 text-right">
                Due <abbr title="{{precise_due_date}}">{{fuzzy_due_date}}</abbr>
                <i class="destroy fa fa-trash-o hidden-xs fa-fw"></i>
                <i class="destroy fa fa-trash-o visible-xs fa-fw fa-lg pull-right"></i>
            </div>
        {{/if}}
    </div>
</template>

<template name="about_modal">
    <div class="modal fade" id="about" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">About Hamwerk</h4>
                </div>
                <div class="modal-body">
                    {{> about_body}}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</template>
