<head>
    <title>Todos</title>
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
</head>

<body>
    <div class="container-fluid">
        <div class="row-fluid">
            <div id="side-pane" class="span3">
                <div class="well sidebar-nav">
                    <ul class="nav nav-list">
                        {{> classes}}
                    </ul>
                </div>
            </div>
            
            <div id="main-pane" class="span9">
                {{> assignments}}
            </div>
        </div>
    </div>
    {{> intercom}}
</body>

<template name="intercom">
    <script id="IntercomSettingsScriptTag">
        window.intercomSettings = {
            // TODO: The current logged in user's email address.
            email: "mathphreak@gmail.com",
            // TODO: The current logged in user's sign-up date as a Unix timestamp.
            created_at: 0,
            app_id: "2bb6ee6dc80fe8088dd8b40d21fa64fd5ab4db8a"
        };
    </script>
    <script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://static.intercomcdn.com/intercom.v1.js';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}};})()</script>
</template>

<template name="classes">
    {{#each fake_all_class_list}}
        <li class="class {{active}}"><a href="/">All Classes</a></li>
    {{/each}}
    <li class="nav-header">Classes</li>
    {{#if loading}}
        <li class="nav-header">Loading...</li>
    {{else}}
        {{#each classes}}
            <li class="class {{active}}">
                {{#if editing}}
                    <div class="edit">
                        <input class="class-name-input" id="class-name-input" type="text" value="{{name}}" />
                    </div>
                {{else}}
                    <a class="class-name" href="/{{_id}}">
                        {{name}}
                    </a>
                {{/if}}
            </li>
        {{/each}}
        <li class="divider"></li>
        <li id="createList" class="nav-header">
            <div class="row-fluid">
                <input type="text" id="new-class" placeholder="New class" class="span12" />
            </div>
        </li>
    {{/if}}
</template>

<template name="assignments">
    {{#if any_class_selected}}
        <div id="items-view">
            {{#if loading}}
                Loading...
            {{else}}
                <div class="row-fluid"><input type="text" id="new-assignment" placeholder="New item" class="span12" /></div>
                <div>
                    {{#each assignments}}
                        {{> assignment_item}}
                    {{/each}}
                </ul>
            {{/if}}
        </div>
    {{/if}}
</template>

<template name="assignment_item">
    <div class="assignment {{done_class}} row-fluid">
        <div class="span1 text-center">
            <i class="destroy icon-trash"></i>
            <a class="check" href="#"><i class="icon-check{{{done_checkbox}}}"></i></a>
        </div>
        {{#if editing}}
            <div class="span8 edit">
                <input class="input-block-level" id="assignment-input" type="text" value="{{text}}" />
            </div>
        {{else}}
            <div class="span8 assignment-text {{text_class}}">{{text}}</div>
        {{/if}}
        <div class="item-details span3 text-right">
            Due <abbr title="{{precise_due_date}}">{{fuzzy_due_date}}</abbr>
        </div>
    </div>
</template>

